# 基于无序链表的顺序查找

# 基于有序数组的二分查找

# 二叉查找树
一颗二叉查找树（BST）是一颗二叉树，其中每个结点都含有一个Comparable的键（以及相关联的值）且每个结点的键都大于其左子树中的任意结点的键而小于右子树的任意结点的键。
size(x) = size(x.left) + size(x.right) + 1

# 平衡查找树
## 2-3树
一颗标准的二叉查找树种的结点称为2-结点（含有一个键和两条链接）。    
引入3-结点（两个键和三条链接）    
一颗2-3查找树或为一颗空树，或由以下结点组成：
- 2-结点，含有一个键和两条链接，左链接指向的2-3树中的键都小于该结点，右链接指向的2-3树种的键都大于该结点
- 3-结点，含有两个键和三条链接，左链接指向2-3树中的键都小于该结点，中链接指向的2-3树中的键都位于该结点的两个键之间，右链接指向2-3树中的键都大于该结点

在一棵大小为N的2-3树中，查找和插入操作访问的结点必然不超过lgN个。

1）查找
- 判断一个键是否在树中，先将它和根结点中的键比较
- 若它和其中任意一个相等，则查找命中
- 否则就根据比较的结果找到指向相应区间的链接，并在其指向的子树中递归继续查找
- 若是空链接，则查找未命中

2）向2-结点插入新键   
先进行一次未命中的查找，然后把新结点挂在树的底部。
若未命中的查找结束于一个2-结点，则只要把这个2-结点替换为一个3-结点：将要插入的键保存在其中即可。

3）向一棵只含有一个3-结点的树中插入新键    
插入新键，临时将新键存入树中唯一的结点中，使之成为一个4-结点（3个键和4条链接）。    
将该4-结点转换为一棵由3个2-结点组成的2-3树。   

4）向一个父结点为2-结点的3-结点中插入新键    
在维持树的完美平衡的前提下为新键腾出空间。    
将插入新键后的4-结点中的中键插入到父节点中，并指向左右键

5）向一个父结点为3-结点的3-结点插入新键    
成为4-结点，将中键插入到父结点中，左右键变为该父结点的两条链路下结点。    
父结点变为4-结点，继续讲中键插入到它的父结点上，左右键变为父结点的两条链路下结点。
不断向上插入，直至遇到一个2-结点并将它替换为一个不需要继续分解的3-结点，或者是到达3-结点的根。

6）分解根结点   
如果从插入结点到根结点的路径上全都是3-结点，根结点最终变成一个临时的4-结点。此时可按照向一棵只有一个3-结点的树中插入新键的方法处理该问题。
将临时的4-结点分解为3个2-结点，使得树高加1。

7）局部变换
将一个4-结点分解为一颗2-3树可能有6种情况：这个4-结点可能是根结点，可能是一个2-结点的左子结点或者右子结点，也可能是一个3-结点的左子结点、中子结点或右子结点。

## 红黑二叉查找树
使用标准的二叉查找树和一些额外的信息来标识2-3树。    
红链接将两个2-节点连接起来构成一个3-结点，黑链接则是2-3树中的普通链接。    

红黑树是含有红黑链接并满足下列条件的二叉查找树：
- 红链接均为左链接；
- 没有任何一个结点同时和两条红链接相连；
- 该树是完美黑色平衡的，即任意空链接到根结点的路径上的黑链接数量是相同的。

左旋转：将红色的右链接转化为左链接    
右旋转

1）向单个2-结点中插入新键    
- 若新键小于老键，则只需新增一个红色的结点即可，新的红黑树和单个3-结点完全等价
- 若新键大于老键，则新增的红色结点将会产生一条红色的右链接，需使用`root = rotateLeft(root)`来将其旋转为红色左链接并修正根结点的链接，插入操作才算完成
- 两种情况下的结果均为一棵和单个3-结点等价的红黑树，其中含有两个键，一条红链接，树的黑链接高度为1
  
2）向树底部的2-结点插入新键    
- 用和二叉查找树相同的方式向一棵红黑树中插入一个新键会在树的底部新增一个结点，总是用红链接将新结点和它的父结点相连
- 若它的父结点是一个2-结点，那么就是向单个2-结点中插入新键情况，依据两情况去处理
- 若指向新结点的是父结点的左链接，那么父结点直接成为一个3-结点；
- 若指向新结点的是父结点的右链接，那就是一个错误的3-结点，此时需要左旋转修正它

3）向一棵双键树（3-结点）中插入新键
分为三种情况：新键小于树中的两个键、在两者之间、或是大于树中的两个键。每种情况都会产生一个同事连接到两条红链接的结点，目标就是修正这一点。    

- 新键大于原树中的两个键，因此它被连接到3-结点的右链接。此时树是平衡的，根结点为中间大小的键，它有两条红链接分别和较小和较大的结点相连。若将两条链接的颜色都由红变为黑，那就得到一棵由三个结点组成、高为2的平衡树，对应一棵2-3树
- 若新键小于原树中的两个键，它就被连接到最左边的空链接，这样就产生两条连续的红链接。此时只需将上层的红链接右转即可得到第一种情况（右转、变色）
- 若新键介于原树中的两个键之间，这有会产生两条连续的红链接，一条红色左链接接一条红色右链接。此时只需将下层的红链接左旋转即可得到第二种情况（两条连续的红色左链接）

4）向树底部的3-结点插入新键    
指向新结点的链接可能是3-结点的右链接（只需转换颜色）、或是左链接（右旋转再转换颜色）、或是中链接（先左旋转下层链接后右旋转上层链接，再转换颜色）。    

5）将红链接在树中向上传递    
- 要在一个3-结点下插入新键，先创建一个临时的4-结点，将其分解并将红链接由中间键传递给它的父结点。重复以上过程，就能将红链接在树中向上传递，直至遇到一个2-结点或根结点
- 若右子结点时红色的而左子结点时黑色的，则进行左旋转
- 若左子结点时红色的且它的左子结点也是红色的，进行右旋转
- 若左右子结点均为红色，进行颜色转换

6）删除